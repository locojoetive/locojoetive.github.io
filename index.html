<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>10 Second Tap Challenge</title>
    <style>
        /* Prevents default browser actions like text selection or callouts on tap */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* Main container for the game interface */
        #game-container {
            display: flex;
            flex-direction: column;
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* Player screen areas */
        .player-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            color: white;
            position: relative;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #player-blue { background-color: #007bff; }
        #player-red { background-color: #dc3545; }

        /* Styling for player areas after they've tapped */
        .player-area.waiting {
            background-color: #343a40; /* Dark gray to indicate finished */
        }

        /* Central 'Start' button and 'Next Round' button styling */
        .game-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px 40px;
            font-size: 28px;
            font-weight: bold;
            color: #333;
            background-color: #fff;
            border: 4px solid #333;
            border-radius: 15px;
            cursor: pointer;
            z-index: 10;
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
            text-align: center;
        }

        /* Hides elements when not active */
        .hidden {
            display: none;
        }

        /* Container for displaying results */
        #results-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.9);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.25);
            text-align: center;
            z-index: 5;
            width: 85%;
            max-width: 400px;
        }

        #results-container h2 {
            margin-top: 0;
            font-size: 28px;
            color: #333;
        }

        #results-container p {
            margin: 10px 0;
            font-size: 18px;
            color: #555;
        }
        
        /* Specific styling for the winner announcement */
        #winner-declaration {
            font-size: 22px;
            font-weight: bold;
            margin-top: 15px;
        }

        /* Styling for player result details */
        .player-result {
            margin: 15px 0;
        }

        .player-result span {
            font-weight: bold;
        }
        
        #blue-winner { color: #007bff; }
        #red-winner { color: #dc3545; }
        #tie-result { color: #6c757d; }
    </style>
</head>
<body>

    <div id="game-container">
        <div id="player-blue" class="player-area">
            <div id="blue-result-display" class="result-display"></div>
        </div>
        <div id="player-red" class="player-area">
            <div id="red-result-display" class="result-display"></div>
        </div>

        <button id="start-button" class="game-button">Start</button>

        <div id="results-container" class="hidden">
            <h2>Results</h2>
            <div id="blue-player-result" class="player-result"></div>
            <div id="red-player-result" class="player-result"></div>
            <p id="winner-declaration"></p>
        </div>
        
        <button id="next-round-button" class="game-button hidden">Next Round</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // DOM Element References
            const startButton = document.getElementById('start-button');
            const nextRoundButton = document.getElementById('next-round-button');
            const bluePlayerArea = document.getElementById('player-blue');
            const redPlayerArea = document.getElementById('player-red');
            const resultsContainer = document.getElementById('results-container');
            const bluePlayerResultEl = document.getElementById('blue-player-result');
            const redPlayerResultEl = document.getElementById('red-player-result');
            const winnerDeclarationEl = document.getElementById('winner-declaration');

            // Game State
            let gameInProgress = false;
            let startTime = 0;
            let playerTimes = { blue: null, red: null };
            const TARGET_TIME = 10000; // 10 seconds in milliseconds

            // --- EVENT LISTENERS ---

            // Start the game when the start button is clicked
            startButton.addEventListener('click', startGame);

            // Set up tap listeners for both player areas
            bluePlayerArea.addEventListener('touchend', () => handlePlayerTap('blue'));
            redPlayerArea.addEventListener('touchend', () => handlePlayerTap('red'));
            
            // Allow mouse clicks for desktop testing
            bluePlayerArea.addEventListener('click', () => handlePlayerTap('blue'));
            redPlayerArea.addEventListener('click', () => handlePlayerTap('red'));

            // Reset the game for the next round
            nextRoundButton.addEventListener('click', resetGame);

            // --- GAME LOGIC FUNCTIONS ---

            /**
             * Initializes the game, hides the start button, and records the start time.
             */
            function startGame() {
                if (gameInProgress) return;

                gameInProgress = true;
                playerTimes = { blue: null, red: null };
                startTime = performance.now();
                
                startButton.classList.add('hidden');
                resultsContainer.classList.add('hidden');
                nextRoundButton.classList.add('hidden');

                // Reset visual state
                bluePlayerArea.classList.remove('waiting');
                redPlayerArea.classList.remove('waiting');
            }

            /**
             * Handles a player tapping their area.
             * @param {('blue'|'red')} player - The player who tapped.
             */
            function handlePlayerTap(player) {
                // Ignore taps if the game isn't running or the player has already tapped
                if (!gameInProgress || playerTimes[player] !== null) {
                    return;
                }

                const endTime = performance.now();
                playerTimes[player] = endTime - startTime;

                // Visually indicate that the player has finished
                document.getElementById(`player-${player}`).classList.add('waiting');

                // Check if both players have finished to show results
                if (playerTimes.blue !== null && playerTimes.red !== null) {
                    endGame();
                }
            }
            
            /**
             * Calculates results, determines the winner, and displays the outcome.
             */
            function endGame() {
                gameInProgress = false;

                const blueTime = playerTimes.blue / 1000; // Convert to seconds
                const redTime = playerTimes.red / 1000;
                
                const blueDiff = Math.abs(blueTime - (TARGET_TIME / 1000));
                const redDiff = Math.abs(redTime - (TARGET_TIME / 1000));

                // Populate result elements
                bluePlayerResultEl.innerHTML = `Blue: <span>${blueTime.toFixed(3)}s</span> (Difference: ${blueDiff.toFixed(3)}s)`;
                redPlayerResultEl.innerHTML = `Red: <span>${redTime.toFixed(3)}s</span> (Difference: ${redDiff.toFixed(3)}s)`;
                
                // Determine and display the winner
                if (blueDiff < redDiff) {
                    winnerDeclarationEl.innerHTML = 'ðŸŽ‰ <span id="blue-winner">Blue Wins!</span>';
                } else if (redDiff < blueDiff) {
                    winnerDeclarationEl.innerHTML = 'ðŸŽ‰ <span id="red-winner">Red Wins!</span>';
                } else {
                    winnerDeclarationEl.innerHTML = '<span id="tie-result">It\'s a Tie!</span>';
                }

                // Show the results and the 'Next Round' button
                resultsContainer.classList.remove('hidden');
                nextRoundButton.classList.remove('hidden');
            }

            /**
             * Resets the game to its initial state for a new round.
             */
            function resetGame() {
                nextRoundButton.classList.add('hidden');
                resultsContainer.classList.add('hidden');
                startButton.classList.remove('hidden');

                bluePlayerArea.classList.remove('waiting');
                redPlayerArea.classList.remove('waiting');

                playerTimes = { blue: null, red: null };
                gameInProgress = false;
            }
        });
    </script>
</body>
</html>