<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>10 Second Tap Challenge</title>
    <style>
        /* Basic Setup & Mobile Gesture Prevention */
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* IE10+/Edge */
            user-select: none; /* Standard */
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation; /* Disables double-tap to zoom, etc. */
        }

        /* Main Game Container */
        #game-container {
            display: flex;
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* Player Areas */
        .player-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            color: white;
            transition: background-color 0.2s ease;
            position: relative; /* For pseudo-elements */
        }

        #player1 {
            background-color: #3498db; /* Blue */
        }

        #player2 {
            background-color: #e74c3c; /* Red */
        }

        /* Visual feedback for when a player has tapped */
        .player-area.waiting::before {
            content: 'Ready...';
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .player-area.done {
            background-color: #2c3e50; /* Darker color when done */
        }

        .player-area.done::before {
            content: 'Stopped!';
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }


        /* Central Start Button */
        #start-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px 40px;
            font-size: 1.8rem;
            font-weight: bold;
            cursor: pointer;
            border: 3px solid white;
            background-color: #2ecc71; /* Green */
            color: white;
            border-radius: 15px;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        
        /* Results Overlay */
        #results-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.85);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 20;
            padding: 20px;
            box-sizing: border-box;
        }

        #results-overlay h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        #results-overlay p {
            font-size: 1.2rem;
            margin: 8px 0;
        }

        #winner-declaration {
            font-size: 2rem;
            font-weight: bold;
            margin-top: 20px;
            color: #f1c40f; /* Yellow for winner */
        }
        
        #next-round-button {
            margin-top: 30px;
            padding: 15px 30px;
            font-size: 1.5rem;
            cursor: pointer;
            border: 2px solid white;
            background-color: #9b59b6; /* Purple */
            color: white;
            border-radius: 10px;
        }

        /* Utility class to hide elements */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <div class="player-area" id="player1"></div>
        
        <div class="player-area" id="player2"></div>
        
        <button id="start-button">Start</button>

        <div id="results-overlay" class="hidden">
            <h2>Results</h2>
            <p id="p1-result"></p>
            <p id="p2-result"></p>
            <p id="winner-declaration"></p>
            <button id="next-round-button">Next Round</button>
        </div>
    </div>

    <script>
        // DOM Element References
        const startButton = document.getElementById('start-button');
        const player1Area = document.getElementById('player1');
        const player2Area = document.getElementById('player2');
        const resultsOverlay = document.getElementById('results-overlay');
        const p1ResultDisplay = document.getElementById('p1-result');
        const p2ResultDisplay = document.getElementById('p2-result');
        const winnerDeclaration = document.getElementById('winner-declaration');
        const nextRoundButton = document.getElementById('next-round-button');

        // Game State
        let gameState = {
            startTime: null,
            p1Time: null,
            p2Time: null,
            gameRunning: false,
            targetTime: 10000 // 10 seconds in milliseconds
        };

        // --- Event Listeners ---

        // Start the game
        startButton.addEventListener('click', startGame);

        // Player 1 stops their timer
        player1Area.addEventListener('touchend', () => handlePlayerTap(1));

        // Player 2 stops their timer
        player2Area.addEventListener('touchend', () => handlePlayerTap(2));
        
        // Listen for clicks as a fallback for desktop testing
        player1Area.addEventListener('click', () => handlePlayerTap(1));
        player2Area.addEventListener('click', () => handlePlayerTap(2));

        // Start the next round
        nextRoundButton.addEventListener('click', resetGame);

        // --- Game Logic Functions ---

        /**
         * Starts the timer and sets up the game state for a new round.
         */
        function startGame() {
            // Prevent starting if already running
            if (gameState.gameRunning) return;

            gameState.gameRunning = true;
            gameState.startTime = performance.now();
            
            startButton.classList.add('hidden');
            player1Area.classList.add('waiting');
            player2Area.classList.add('waiting');
        }

        /**
         * Handles a player tapping their screen area.
         * @param {number} playerNumber - The player who tapped (1 or 2).
         */
        function handlePlayerTap(playerNumber) {
            // Only register tap if the game is running
            if (!gameState.gameRunning) return;

            const tapTime = performance.now();

            if (playerNumber === 1 && gameState.p1Time === null) {
                gameState.p1Time = tapTime - gameState.startTime;
                player1Area.classList.replace('waiting', 'done');
            } else if (playerNumber === 2 && gameState.p2Time === null) {
                gameState.p2Time = tapTime - gameState.startTime;
                player2Area.classList.replace('waiting', 'done');
            }

            // Check if both players have finished
            if (gameState.p1Time !== null && gameState.p2Time !== null) {
                endGame();
            }
        }

        /**
         * Calculates results and displays the winner overlay.
         */
        function endGame() {
            gameState.gameRunning = false;
            
            const p1Seconds = (gameState.p1Time / 1000).toFixed(3);
            const p2Seconds = (gameState.p2Time / 1000).toFixed(3);
            
            const p1Diff = Math.abs(p1Seconds - (gameState.targetTime / 1000));
            const p2Diff = Math.abs(p2Seconds - (gameState.targetTime / 1000));

            // Update result text
            p1ResultDisplay.textContent = `Player 1: ${p1Seconds}s (Difference: ${p1Diff.toFixed(3)}s)`;
            p2ResultDisplay.textContent = `Player 2: ${p2Seconds}s (Difference: ${p2Diff.toFixed(3)}s)`;

            // Determine and display the winner
            if (p1Diff < p2Diff) {
                winnerDeclaration.textContent = 'Player 1 Wins! 🏆';
            } else if (p2Diff < p1Diff) {
                winnerDeclaration.textContent = 'Player 2 Wins! 🏆';
            } else {
                winnerDeclaration.textContent = "It's a Draw! 🤝";
            }
            
            resultsOverlay.classList.remove('hidden');
        }

        /**
         * Resets the game state and UI for a new round.
         */
        function resetGame() {
            // Reset state object
            gameState.startTime = null;
            gameState.p1Time = null;
            gameState.p2Time = null;
            gameState.gameRunning = false;

            // Reset UI elements
            resultsOverlay.classList.add('hidden');
            startButton.classList.remove('hidden');
            
            player1Area.classList.remove('waiting', 'done');
            player2Area.classList.remove('waiting', 'done');
        }

    </script>
</body>
</html>